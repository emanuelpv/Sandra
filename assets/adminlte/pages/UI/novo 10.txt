<?php
//É NECESSÁRIO EM TODAS AS VIEWS

$codOrganizacao = session()->codOrganizacao;


if (session()->mensagem_sucesso !== NULL) {
	alerta(session()->mensagem_sucesso, 'success');
}
if (session()->mensagem_erro !== NULL) {
	alerta(session()->mensagem_erro, 'error');
}
if (session()->mensagem_informacao !== NULL) {
	alerta(session()->mensagem_informacao, 'info');
}
if (session()->mensagem_alerta !== NULL) {
	alerta(session()->mensagem_alerta, 'warning');
}


?>

<style>
	.modal {
		overflow: auto !important;
	}

	#minhaFoto {
		width: 160px;
		height: 125px;
		border: 1px solid black;
	}

	#fotoPerfilCadastro {
		width: 160px;
		height: 125px;
		border: 1px solid black;
	}

	.select2-container {
		z-index: 100000;
	}


	.swal2-container {
		z-index: 9999999;
	}
</style>
<link rel="stylesheet" href="<?php echo base_url() ?>/assets/adminlte/plugins/summernote/summernote-bs4.min.css">

<!-- Main content -->
<section class="content">
	<div class="row">
		<div class="col-12">
			<div class="card">
				<div class="card-header">
					<div class="row">
						<div class="col-md-8 mt-2">
							<h3 style="font-size:30px;font-weight: bold;" class="card-title">Requisições</h3>
						</div>
						<div class="col-md-4">
							<button type="button" class="btn btn-block btn-primary" data-toggle="tooltip"
								data-placement="top" title="Adicionar" onclick="addrequisicao()"
								title="Adicionar">Adicionar</button>
						</div>
					</div>
				</div>
				<!-- /.card-header -->
				<div class="card-body">
					<table id="data_tablerequisicao" class="table table-striped table-hover table-sm">
						<thead>
							<tr>
								<th>Requisição</th>
								<th>Descricao</th>
								<th>Departamento</th>
								<th>Informações</th>
								<th></th>
							</tr>
						</thead>
					</table>
				</div>
				<!-- /.card-body -->
			</div>
			<!-- /.card -->
		</div>
		<!-- /.col -->
	</div>
	<!-- /.row -->
</section>
<!-- Add modal content -->
<div id="requisicaoAddModal" class="modal fade" role="dialog" aria-hidden="true">
	<div class="modal-dialog modal-xl">
		<div class="modal-content">
			<div class="modal-header bg-primary text-center p-3">
				<h4 class="modal-title text-white" id="info-header-modalLabel">Adicionar Requisições</h4>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">×</span>
				</button>
			</div>
			<div class="modal-body">
				<form id="requisicaoAddForm" class="pl-3 pr-3">
					<input type="hidden" id="<?php echo csrf_token() ?>requisicaoAddForm"
						name="<?php echo csrf_token() ?>" value="<?php echo csrf_hash() ?>">

					<div class="row">
						<input type="hidden" id="codRequisicao" name="codRequisicao" class="form-control"
							placeholder="CodRequisicao" maxlength="11" required>
					</div>
					<div class="row">
						<div class="col-md-8">
							<div class="form-group">
								<label for="descricao"> Descrição: <span class="text-danger">*</span> </label>
								<textarea cols="40" rows="5" id="descricao" name="descricao" class="form-control"
									placeholder="Descricao" required></textarea>
							</div>
						</div>
						<div class="col-md-4">
							<div class="form-group">
								<label for="codClasseRequisicao"> Classe: <span class="text-danger">*</span> </label>
								<select id="codClasseRequisicao" name="codClasseRequisicao" class="custom-select"
									required>
									<option value=""></option>
								</select>
							</div>
						</div>
					</div>
					<div class="row">
						<div class="col-md-6">
							<label for="codDepartamento"> Departamento: <span class="text-danger">*</span> </label>
							<select id="codDepartamento" name="codDepartamento" class="custom-select" required>
								<option value=""></option>
							</select>
						</div>

						<div class="col-md-6">
							<div class="form-group">
								<label for="codTipoRequisicao"> Tipo Requisição: <span class="text-danger">*</span>
								</label>
								<select id="codTipoRequisicao" name="codTipoRequisicao" class="custom-select" required>
									<option value=""></option>
								</select>
							</div>
						</div>
					</div>
					<div class="row">
						<div class="col-md-4">
							<div class="form-group">
								<label for="dataRequisicao"> Data Requisição: <span class="text-danger">*</span>
								</label>
								<input type="date" id="dataRequisicao" name="dataRequisicao"
									value="<?php echo date('Y-m-d') ?>" class="form-control" dateISO="true" required>
							</div>
						</div>
						<div class="col-md-4">
							<div class="form-group">
								<label for="matSau"> MatSau: <span class="text-danger">*</span> </label>
								<select id="matSau" name="matSau" class="custom-select" required>
									<option value=""></option>
									<option value="1">SIM</option>
									<option value="0">NÂO</option>
								</select>
							</div>
						</div>
					</div>
					<div class="row">
						<div class="col-md-4">
							<div class="form-group">
								<label for="carDisp"> CarDisp: <span class="text-danger">*</span> </label>
								<select id="carDisp" name="carDisp" class="custom-select" required>
									<option value=""></option>
									<option value="1">SIM</option>
									<option value="0">NÂO</option>
								</select>
							</div>
						</div>
					</div>

					<div class="form-group text-center">
						<div class="btn-group">
							<button type="submit" class="btn btn-primary" data-toggle="tooltip" data-placement="top"
								title="Adicionar" id="requisicaoAddForm-btn">Adicionar</button>
							<button type="button" class="btn btn-danger" data-toggle="tooltip" data-placement="top"
								title="Fechar" data-dismiss="modal">Fechar</button>
						</div>
					</div>
				</form>
			</div>
		</div><!-- /.modal-content -->
	</div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<!-- Add modal content -->
<div id="requisicaoEditModal" class="modal fade" role="dialog" aria-hidden="true">
	<div class="modal-dialog modal-xl">
		<div class="modal-content">
			<div class="modal-header bg-primary text-center p-3">
				<h4 class="modal-title text-white" id="info-header-modalLabel">Requisição</h4>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">×</span>
				</button>
			</div>
			<div class="modal-body">

				<div class="col-12 col-sm-12">
					<div class="card card-primary card-tabs">
						<div class="card-header p-0 pt-1">
							<ul class="nav nav-tabs" id="requisicao-tab" role="tablist">
								<li class="nav-item">
									<a class="nav-link active" id="requisicao-Geral-tab" data-toggle="pill"
										href="#requisicao-Geral" role="tab" aria-controls="requisicao-Geral"
										aria-selected="true">Geral</a>
								</li>
								<li class="nav-item">
									<a class="nav-link" id="requisicao-Itens-tab" data-toggle="pill"
										href="#requisicao-Itens" role="tab" aria-controls="requisicao-Itens"
										aria-selected="false">Itens</a>
								</li>
								<li class="nav-item">
									<a class="nav-link" id="requisicao-InformacoesComplementares-tab" data-toggle="pill"
										href="#requisicao-InformacoesComplementares" role="tab"
										aria-controls="requisicao-InformacoesComplementares"
										aria-selected="false">Informações Complementares</a>
								</li>
								<li class="nav-item">
									<a class="nav-link" id="requisicao-Anexos-tab" data-toggle="pill"
										href="#requisicao-Anexos" role="tab" aria-controls="requisicao-Anexos"
										aria-selected="false">Anexos</a>
								</li>
								<li class="nav-item">
									<a class="nav-link" id="requisicao-Despachos-tab" data-toggle="pill"
										href="#requisicao-Despachos" role="tab" aria-controls="requisicao-Despachos"
										aria-selected="false">Histórico de Ações</a>
								</li>
							</ul>
						</div>
						<div class="card-body">
							<div class="tab-content" id="requisicao-tabContent">
								<div class="tab-pane fade show active" id="requisicao-Geral" role="tabpanel"
									aria-labelledby="requisicao-Geral-tab">
									<form id="requisicaoEditForm" class="pl-3 pr-3">
										<input type="hidden" id="<?php echo csrf_token() ?>requisicaoEditForm"
											name="<?php echo csrf_token() ?>" value="<?php echo csrf_hash() ?>">

										<div class="row">
											<input type="hidden" id="codRequisicao" name="codRequisicao"
												class="form-control" placeholder="CodRequisicao" maxlength="11"
												required>
										</div>
										<div class="row">
											<div class="col-md-8">
												<div class="form-group">
													<label for="descricao"> Descrição: <span
															class="text-danger">*</span> </label>
													<textarea cols="40" rows="5" id="descricao" name="descricao"
														class="form-control" placeholder="Descricao"
														required></textarea>
												</div>
											</div>
											<div class="col-md-4">
												<div class="form-group">
													<label for="codClasseRequisicao"> Classe: <span
															class="text-danger">*</span> </label>
													<select id="codClasseRequisicao" name="codClasseRequisicao"
														class="custom-select" required>
														<option value=""></option>
													</select>
												</div>
											</div>
										</div>
										<div class="row">
											<div class="col-md-6">
												<label for="codDepartamento"> Departamento: <span
														class="text-danger">*</span> </label>
												<select disabled="disabled" id="codDepartamento" name="codDepartamento"
													class="custom-select" required>
													<option value=""></option>
												</select>
											</div>

											<div class="col-md-6">
												<div class="form-group">
													<label for="codTipoRequisicao"> Tipo Requisição: <span
															class="text-danger">*</span> </label>
													<select id="codTipoRequisicao" name="codTipoRequisicao"
														class="custom-select" required>
														<option value=""></option>
													</select>
												</div>
											</div>

										</div>

										<div class="row">
											<div class="col-md-4">
												<div class="form-group">
													<label for="dataRequisicao"> Data Requisição: <span
															class="text-danger">*</span> </label>
													<input type="date" id="dataRequisicao" name="dataRequisicao"
														class="form-control" dateISO="true" required>
												</div>
											</div>
											<div class="col-md-4">
												<div class="form-group">
													<label for="valorTotal"> Valor Total: </label>
													<input type="number" id="valorTotal" name="valorTotal"
														class="form-control" placeholder="0.00" required>
												</div>
											</div>
											<div class="col-md-4">
												<div class="form-group">
													<label for="matSau"> MatSau: <span class="text-danger">*</span>
													</label>
													<select id="matSau" name="matSau" class="custom-select" required>
														<option value=""></option>
														<option value="1">SIM</option>
														<option value="0">NÂO</option>
													</select>
												</div>
											</div>
										</div>
										<div class="row">
											<div class="col-md-4">
												<div class="form-group">
													<label for="carDisp"> CarDisp: <span class="text-danger">*</span>
													</label>
													<select id="carDisp" name="carDisp" class="custom-select" required>
														<option value="1">SIM</option>
														<option value="0">NÂO</option>
													</select>
												</div>
											</div>
										</div>

										<div class="form-group text-center">
											<div class="btn-group">
												<button type="submit" class="btn btn-primary" data-toggle="tooltip"
													data-placement="top" title="Salvar"
													id="requisicaoEditForm-btn">Salvar</button>
												<button type="button" class="btn btn-danger" data-toggle="tooltip"
													data-placement="top" title="Fechar"
													data-dismiss="modal">Fechar</button>
											</div>
										</div>
									</form>

								</div>
								<div class="tab-pane fade" id="requisicao-Itens" role="tabpanel"
									aria-labelledby="requisicao-Itens-tab">


									<div class="row">
										<div class="col-md-2">
											<button type="button" class="btn btn-block btn-primary"
												data-toggle="tooltip" data-placement="top" title="Adicionar"
												onclick="additensRequisicao()" title="Adicionar">Adicionar</button>
										</div>



										<div class="col-md-4">
											<button type="button" class="btn btn-block btn-secondary"
												data-toggle="tooltip" data-placement="top" title="Adicionar"
												onclick="pedidoInformacao()" title="Adicionar">Pedido de
												Informação</button>
										</div>
									</div>

									<table id="data_tableitensRequisicao"
										class="table table-striped table-hover table-sm">
										<thead>
											<tr>
												<th>Código</th>
												<th>NrRef</th>
												<th>Descrição Item</th>
												<th>Unidade</th>
												<th>Qtde Sol</th>
												<th>Valor</th>
												<th>Tipo Mat</th>
												<th>Observação</th>

												<th></th>
											</tr>
										</thead>
									</table>
									Itens - select * from apolo.ges_itens

								</div>
								<div class="tab-pane fade" id="requisicao-InformacoesComplementares" role="tabpanel"
									aria-labelledby="requisicao-InformacoesComplementares-tab">


									<div class="col-md-4">
										<button type="button" class="btn btn-block btn-primary" data-toggle="tooltip"
											data-placement="top" title="Adicionar"
											onclick="addinformacoesComplementares()"
											title="Adicionar">Adicionar</button>
									</div>

									<table id="data_tableinformacoesComplementares"
										class="table table-striped table-hover table-sm">
										<thead>
											<tr>
												<th>Código</th>
												<th>Classificação</th>
												<th>Conteúdo</th>
												<th>Data Criação</th>
												<th>Autor</th>

												<th></th>
											</tr>
										</thead>
									</table>


									Informações Complementares - select * apolo.from ges_reqinfocompl
								</div>
								<div class="tab-pane fade" id="requisicao-Anexos" role="tabpanel"
									aria-labelledby="requisicao-Anexos-tab">
									Anexos - select * from apolo.ges_ranexos
								</div>
								<div class="tab-pane fade" id="requisicao-Despachos" role="tabpanel"
									aria-labelledby="requisicao-Despachos-tab">

									<div class="row">
										<div class="col-md-12">
											<!-- The time line -->
											<div class="timeline">
												<!-- timeline time label -->
												<div class="time-label">
													<span class="bg-red">10 Feb. 2014</span>
												</div>
												<!-- /.timeline-label -->
												<!-- timeline item -->
												<div>
													<i class="fas fa-envelope bg-blue"></i>
													<div class="timeline-item">
														<span class="time"><i class="fas fa-clock"></i> 12:05</span>
														<h3 class="timeline-header"><a href="#">Support Team</a> sent
															you an email</h3>

														<div class="timeline-body">
															Etsy doostang zoodles disqus groupon greplin oooj voxy
															zoodles,
															weebly ning heekya handango imeem plugg dopplr jibjab,
															movity
															jajah plickers sifteo edmodo ifttt zimbra. Babblely odeo
															kaboodle
															quora plaxo ideeli hulu weebly balihoo...
														</div>
														<div class="timeline-footer">
															<a class="btn btn-primary btn-sm">Read more</a>
															<a class="btn btn-danger btn-sm">Delete</a>
														</div>
													</div>
												</div>
												<!-- END timeline item -->
												<!-- timeline item -->
												<div>
													<i class="fas fa-user bg-green"></i>
													<div class="timeline-item">
														<span class="time"><i class="fas fa-clock"></i> 5 mins
															ago</span>
														<h3 class="timeline-header no-border"><a href="#">Sarah
																Young</a> accepted your friend request</h3>
													</div>
												</div>
												<!-- END timeline item -->
												<!-- timeline item -->
												<div>
													<i class="fas fa-comments bg-yellow"></i>
													<div class="timeline-item">
														<span class="time"><i class="fas fa-clock"></i> 27 mins
															ago</span>
														<h3 class="timeline-header"><a href="#">Jay White</a> commented
															on your post</h3>
														<div class="timeline-body">
															Take me to your leader!
															Switzerland is small and neutral!
															We are more like Germany, ambitious and misunderstood!
														</div>
														<div class="timeline-footer">
															<a class="btn btn-warning btn-sm">View comment</a>
														</div>
													</div>
												</div>
												<!-- END timeline item -->
												<!-- timeline time label -->
												<div class="time-label">
													<span class="bg-green">3 Jan. 2014</span>
												</div>
												<!-- /.timeline-label -->
												<!-- timeline item -->
												<div>
													<i class="fa fa-camera bg-purple"></i>
													<div class="timeline-item">
														<span class="time"><i class="fas fa-clock"></i> 2 days
															ago</span>
														<h3 class="timeline-header"><a href="#">Mina Lee</a> uploaded
															new photos</h3>
														<div class="timeline-body">
															<img src="https://placehold.it/150x100" alt="...">
															<img src="https://placehold.it/150x100" alt="...">
															<img src="https://placehold.it/150x100" alt="...">
															<img src="https://placehold.it/150x100" alt="...">
															<img src="https://placehold.it/150x100" alt="...">
														</div>
													</div>
												</div>
												<!-- END timeline item -->
												<!-- timeline item -->
												<div>
													<i class="fas fa-video bg-maroon"></i>

													<div class="timeline-item">
														<span class="time"><i class="fas fa-clock"></i> 5 days
															ago</span>

														<h3 class="timeline-header"><a href="#">Mr. Doe</a> shared a
															video</h3>

														<div class="timeline-body">
															<div class="embed-responsive embed-responsive-16by9">
																<iframe class="embed-responsive-item"
																	src="https://www.youtube.com/embed/tMWkeBIohBs"
																	allowfullscreen></iframe>
															</div>
														</div>
														<div class="timeline-footer">
															<a href="#" class="btn btn-sm bg-maroon">See comments</a>
														</div>
													</div>
												</div>
												<!-- END timeline item -->
												<div>
													<i class="fas fa-clock bg-gray"></i>
												</div>
											</div>
										</div>
										<!-- /.col -->
									</div>
								</div>
								Despachos - select * from apolo.ges_reqdespachos
							</div>
						</div>
					</div>
					<!-- /.card -->
				</div>
			</div>

		</div>
	</div><!-- /.modal-content -->
</div><!-- /.modal-dialog -->
</div><!-- /.modal -->


<!-- Add modal content -->
<div id="itensRequisicaoAddModal" class="modal fade" role="dialog" aria-hidden="true">
	<div class="modal-dialog modal-xl">
		<div class="modal-content">
			<div class="modal-header bg-primary text-center p-3">
				<h4 class="modal-title text-white" id="info-header-modalLabel">Adicionar Itens Requisição</h4>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">×</span>
				</button>
			</div>
			<div class="modal-body">
				<form id="itensRequisicaoAddForm" class="pl-3 pr-3">
					<input type="hidden" id="<?php echo csrf_token() ?>itensRequisicaoAddForm"
						name="<?php echo csrf_token() ?>" value="<?php echo csrf_hash() ?>">

					<div class="row">
						<input type="hidden" id="codRequisicaoItem" name="codRequisicaoItem" class="form-control"
							placeholder="Código" maxlength="11" required>
						<input type="hidden" id="codRequisicao" name="codRequisicao" class="form-control" maxlength="11"
							required>
					</div>
					<div class="row">

						<div class="col-md-12">
							<div class="form-group">
								<label for="descricao"> Descrição Item: <span class="text-danger">*</span> </label>
								<textarea cols="40" rows="5" id="descricao" name="descricao" class="form-control"
									placeholder="Descrição detalhada do item como nome, dimensões, cor e demais características obrigatórias do material ou serviço"
									required></textarea>
							</div>
						</div>
					</div>

					<!-- /.container-fluid -->


					<div class="row">

						<div class="col-md-6">
							<div class="card">
								<div class="card-header ui-sortable-handle" style="cursor: move;">
									<h3 class="card-title">
										<i class="fas fa-circle-info mr-1"></i>
										Detalhes do Item
									</h3>
									<div class="card-tools">

									</div>
								</div><!-- /.card-header -->
								<div class="card-body">




									<div class="row">
										<div class="col-md-4">
											<div class="form-group">
												<label for="nrRef"> NrRef (Opcional): </label>
												<input type="number" id="nrRef" name="nrRef" class="form-control"
													placeholder="NrRef" maxlength="11" number="true">
											</div>
										</div>

										<div class="col-md-4">
											<div class="form-group">
												<label for="unidade"> Unidade: <span class="text-danger">*</span>
												</label>
												<select id="unidade" name="unidade" class="custom-select" required>
													<option></option>
												</select>
											</div>
										</div>


										<div class="col-md-4">
											<div class="form-group">
												<label for="tipoMaterial"> Tipo: <span class="text-danger">*</span>
												</label>
												<select id="tipoMaterial" name="tipoMaterial" class="custom-select"
													required>
													<option></option>
												</select>
											</div>
										</div>
									</div>

									<div class="row">
										<div class="col-md-3">
											<div class="form-group">
												<label for="qtdeSol"> Qtde Sol: <span class="text-danger">*</span>
												</label>
												<input type="text" id="qtdeSol" name="qtdeSol" class="form-control"
													placeholder="Qtde Sol" required>
											</div>
										</div>
										<div class="col-md-3">
											<div class="form-group">
												<label for="valorUnit"> Valor: <span class="text-danger">*</span>
												</label>
												<input type="text" id="valorUnit" name="valorUnit" class="form-control"
													placeholder="0.00" required>
											</div>
										</div>

										<div class="col-md-4">
											<div class="form-group">
												<label for="metodoCalculo"> Método de Cálculo: <span
														class="text-danger">*</span>
												</label>
												<select id="metodoCalculo" name="metodoCalculo" class="custom-select"
													required>
													<option value="1">Média de preços</option>
													<option value="0">Valor Fixo</option>
													<option value="2">Menor preço</option>
													<option value="3">Maior preço</option>
												</select>
											</div>
										</div>

									</div>
									<div class="row">

										<div class="col-md-4">
											<div class="form-group">
												<label for="codSiasg"> SIASG/UASG (Opcional): </label>
												<input type="text" id="codSiasg" name="codSiasg" class="form-control"
													placeholder="SIASG/UASG" maxlength="20">
											</div>
										</div>


									</div>
								</div><!-- /.card-body -->
							</div>
						</div>


					</div>



					<div class="row">

						<div class="col-md-12">
							<div class="form-group">
								<label for="obs"> Observação/Justificativa: </label>
								<textarea cols="40" rows="5" id="obs" name="obs" class="form-control"
									placeholder="Informe por exempo: como, onde e quando este item será utilizado"
									required></textarea>
							</div>
						</div>
					</div>

					<div class="form-group text-center">
						<div class="btn-group">
							<button type="submit" class="btn btn-primary" data-toggle="tooltip" data-placement="top"
								title="Adicionar" id="itensRequisicaoAddForm-btn">Adicionar</button>
							<button type="button" class="btn btn-danger" data-toggle="tooltip" data-placement="top"
								title="Fechar" data-dismiss="modal">Fechar</button>
						</div>
					</div>
				</form>
			</div>
		</div><!-- /.modal-content -->
	</div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<!-- Add modal content -->
<div id="itensRequisicaoEditModal" class="modal fade" role="dialog" aria-hidden="true">
	<div class="modal-dialog modal-xl">
		<div class="modal-content">
			<div class="modal-header bg-primary text-center p-3">
				<h4 class="modal-title text-white" id="info-header-modalLabel">Atualizar Itens Requisição</h4>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">×</span>
				</button>
			</div>
			<div class="modal-body">
				<form id="itensRequisicaoEditForm" class="pl-3 pr-3">
					<input type="hidden" id="<?php echo csrf_token() ?>itensRequisicaoEditForm"
						name="<?php echo csrf_token() ?>" value="<?php echo csrf_hash() ?>">

					<div class="row">
						<input type="hidden" id="codRequisicaoItem" name="codRequisicaoItem" class="form-control"
							placeholder="Código" maxlength="11" required>
					</div>


					<div class="row">

						<div class="col-md-12">
							<div class="form-group">
								<label for="descricao"> Descrição Item: <span class="text-danger">*</span> </label>
								<textarea cols="40" rows="5" id="descricao" name="descricao" class="form-control"
									placeholder="Descrição detalhada do item como nome, dimensões, cor e demais características obrigatórias do material ou serviço"
									required></textarea>
							</div>
						</div>
					</div>




					<div class="row">

						<div class="col-md-6">
							<div class="card card-secondary">
								<div class="card-header ui-sortable-handle" style="cursor: move;">
									<h3 class="card-title">
										<i class="fas fa-circle-info mr-1"></i>
										Detalhes do Item
									</h3>
									<div class="card-tools">

									</div>
								</div><!-- /.card-header -->
								<div class="card-body">




									<div class="row">
										<div class="col-md-4">
											<div class="form-group">
												<label for="nrRef"> NrRef (Opcional): </label>
												<input type="number" id="nrRef" name="nrRef" class="form-control"
													placeholder="NrRef" maxlength="11" number="true">
											</div>
										</div>

										<div class="col-md-4">
											<div class="form-group">
												<label for="unidade"> Unidade: <span class="text-danger">*</span>
												</label>
												<select id="unidade" name="unidade" class="custom-select" required>
													<option></option>
												</select>
											</div>
										</div>


										<div class="col-md-4">
											<div class="form-group">
												<label for="tipoMaterial"> Tipo: <span class="text-danger">*</span>
												</label>
												<select id="tipoMaterial" name="tipoMaterial" class="custom-select"
													required>
													<option></option>
												</select>
											</div>
										</div>
									</div>

									<div class="row">
										<div class="col-md-3">
											<div class="form-group">
												<label for="qtdeSol"> Qtde Sol: <span class="text-danger">*</span>
												</label>
												<input type="text" id="qtdeSol" name="qtdeSol" class="form-control"
													placeholder="Qtde Sol" required>
											</div>
										</div>
										<div class="col-md-3">
											<div class="form-group">
												<label for="valorUnit"> Valor: <span class="text-danger">*</span>
												</label>
												<input type="text" id="valorUnit" name="valorUnit" class="form-control"
													placeholder="0.00" required>
											</div>
										</div>
										<div class="col-md-4">
											<div class="form-group">
												<label for="metodoCalculo"> Método de Cálculo: <span
														class="text-danger">*</span>
												</label>
												<select id="metodoCalculo" name="metodoCalculo" class="custom-select"
													required>
													<option value="0">Valor Fixo</option>
													<option value="1">Média de preços</option>
													<option value="2">Menor preço</option>
													<option value="3">Maior preço</option>
												</select>
											</div>
										</div>
									</div>
									<div class="row">

										<div class="col-md-4">
											<div class="form-group">
												<label for="codSiasg"> SIASG/UASG (Opcional): </label>
												<input type="text" id="codSiasg" name="codSiasg" class="form-control"
													placeholder="SIASG/UASG" maxlength="20">
											</div>
										</div>


									</div>
									<div class="row">

										<div class="col-md-12">
											<div class="form-group">
												<label for="obs"> Observação/Justificativa: </label>
												<textarea cols="40" rows="5" id="obs" name="obs" class="form-control"
													placeholder="Informe por exempo: como, onde e quando este item será utilizado"
													required></textarea>
											</div>
										</div>
									</div>



								</div><!-- /.card-body -->
							</div>
						</div>

						<div class="col-md-6">
							<div class="card card-secondary">
								<div class="card-header ui-sortable-handle" style="cursor: move;">
									<h3 class="card-title">
										<i class="fas fa-file mr-1"></i>
										Composição do Preço do produto/serviço (Origem)
									</h3>
									<div class="card-tools">

									</div>
								</div><!-- /.card-header -->
								<div class="card-body">

									<div class="col-md-4">
										<button type="button" class="btn btn-block btn-primary" data-toggle="tooltip"
											data-placement="top" title="Adicionar" onclick="addorcamentos()"
											title="Adicionar">Adicionar</button>
									</div>


									<table id="data_tableorcamentos" class="table table-striped table-hover table-sm">
										<thead>
											<tr>
												<th>Nr</th>
												<th>Fornecedor</th>
												<th>Valor Unitário</th>
												<th>Tipo Orcamento</th>
												<th></th>
											</tr>
										</thead>
									</table>


								</div><!-- /.card-body -->
							</div>
						</div>


					</div>


			</div>


			<div class="form-group text-center">
				<div class="btn-group">
					<button type="submit" class="btn btn-primary" data-toggle="tooltip" data-placement="top"
						title="Salvar" id="itensRequisicaoEditForm-btn">Salvar</button>
					<button type="button" class="btn btn-danger" data-toggle="tooltip" data-placement="top"
						title="Fechar" data-dismiss="modal">Fechar</button>
				</div>
			</div>
			</form>

		</div>
	</div><!-- /.modal-content -->
</div><!-- /.modal-dialog -->
</div><!-- /.modal -->




<div id="orcamentosAddModal" class="modal fade" role="dialog" aria-hidden="true">
	<div class="modal-dialog modal-xl">
		<div class="modal-content">
			<div class="modal-header bg-primary text-center p-3">
				<h4 class="modal-title text-white" id="info-header-modalLabel">Detalhe do Orçamento</h4>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">×</span>
				</button>
			</div>
			<div class="modal-body">
				<form id="orcamentosAddForm" class="pl-3 pr-3">
					<input type="hidden" id="<?php echo csrf_token() ?>orcamentosAddForm"
						name="<?php echo csrf_token() ?>" value="<?php echo csrf_hash() ?>">


					<div class="row">
						<input type="hidden" id="codOrcamento" name="codOrcamento" class="form-control"
							placeholder="Código" maxlength="11" required>
						<input type="hidden" id="codRequisicaoItemOrcamentoAdd" name="codRequisicaoItem"
							class="form-control" placeholder="Código" maxlength="11" required>
						<input type="hidden" id="metodoCalculoAddOrcamento" name="metodoCalculo" class="form-control"
							placeholder="Código" maxlength="11" required>
					</div>


					<div class="row">

						<div class="col-md-3">
							<div class="form-group">
								<label for="codFornecedor"> Fornecedor: <span class="text-danger">*</span> </label>
								<select id="codFornecedor" name="codFornecedor" class="custom-select" required>
									<option></option>
								</select>
							</div>
						</div>
						<div class="col-md-2">
							<div class="form-group">
								<label for="valorUnitario"> Valor Unitário: <span class="text-danger">*</span> </label>
								<input type="text" id="valorUnitario" name="valorUnitario" class="form-control"
									placeholder="0.00" required>
							</div>
						</div>
						<div class="col-md-3">
							<div class="form-group">
								<label for="codTipoOrcamento"> Tipo Orcamento: <span class="text-danger">*</span>
								</label>
								<select id="codTipoOrcamento" name="codTipoOrcamento" class="custom-select" required>
									<option></option>
								</select>
							</div>
						</div>
						<div class="col-md-4">
							<div class="form-group">
								<label for="Data Orçamento"> Data Orçamento: <span class="text-danger">*</span> </label>
								<input type="date" id="dataOrcamento" name="dataOrcamento"
									value="<?php echo date('Y-m-d') ?>" class="form-control" dateISO="true" required>
							</div>
						</div>
					</div>
					<div class="row">
					</div>

					<div class="form-group text-center">
						<div class="btn-group">
							<button type="submit" class="btn btn-primary" data-toggle="tooltip" data-placement="top"
								title="Adicionar" id="orcamentosAddForm-btn">Adicionar</button>
							<button type="button" class="btn btn-danger" data-toggle="tooltip" data-placement="top"
								title="Fechar" data-dismiss="modal">Fechar</button>
						</div>
					</div>
				</form>
			</div>
		</div><!-- /.modal-content -->
	</div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<!-- Add modal content -->
<div id="orcamentosEditModal" class="modal fade" role="dialog" aria-hidden="true">
	<div class="modal-dialog modal-xl">
		<div class="modal-content">
			<div class="modal-header bg-primary text-center p-3">
				<h4 class="modal-title text-white" id="info-header-modalLabel">Detalhe do Orçamento</h4>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">×</span>
				</button>
			</div>
			<div class="modal-body">
				<form id="orcamentosEditForm" class="pl-3 pr-3">
					<input type="hidden" id="<?php echo csrf_token() ?>orcamentosEditForm"
						name="<?php echo csrf_token() ?>" value="<?php echo csrf_hash() ?>">

					<div class="row">
						<input type="hidden" id="codOrcamento" name="codOrcamento" class="form-control"
							placeholder="Código" maxlength="11" required>
						<input type="hidden" id="codRequisicaoItemOrcamentoEdit" name="codRequisicaoItem"
							class="form-control" placeholder="Código" maxlength="11" required>
						<input type="hidden" id="metodoCalculoEditOrcamento" name="metodoCalculo" class="form-control"
							placeholder="Código" maxlength="11" required>
						<input type="hidden" id="codFornecedor" name="codFornecedor" class="form-control"
							placeholder="Código" maxlength="11" required>
					</div>
					<div class="row">
						<div class="col-md-4">
							<div class="form-group">
								<label for="razaoSocial"> Fornecedor <span class="text-danger">*</span> </label>
								<input readonly type="text" id="razaoSocial" name="razaoSocial" class="form-control"
									placeholder="razaoSocial" maxlength="50" required>
							</div>
						</div>
						<div class="col-md-2">
							<div class="form-group">
								<label for="valorUnitario"> Valor Unitário: <span class="text-danger">*</span> </label>
								<input type="text" id="valorUnitario" name="valorUnitario" class="form-control"
									placeholder="0.00" required>
							</div>
						</div>
						<div class="col-md-3">
							<div class="form-group">
								<label for="codTipoOrcamento"> Tipo Orcamento: <span class="text-danger">*</span>
								</label>
								<select id="codTipoOrcamento" name="codTipoOrcamento" class="custom-select" required>
									<option></option>
								</select>
							</div>
						</div>
						<div class="col-md-4">
							<div class="form-group">
								<label for="Data Orçamento"> Data Orçamento: <span class="text-danger">*</span> </label>
								<input type="date" id="dataOrcamento" name="dataOrcamento" class="form-control"
									dateISO="true" required>
							</div>
						</div>
					</div>
					<div class="row">
					</div>

					<div class="form-group text-center">
						<div class="btn-group">
							<button type="submit" class="btn btn-primary" data-toggle="tooltip" data-placement="top"
								title="Salvar" id="orcamentosEditForm-btn">Salvar</button>
							<button type="button" class="btn btn-danger" data-toggle="tooltip" data-placement="top"
								title="Fechar" data-dismiss="modal">Fechar</button>
						</div>
					</div>
				</form>

			</div>
		</div><!-- /.modal-content -->
	</div><!-- /.modal-dialog -->
</div><!-- /.modal -->



<div id="fornecedoresAddModal" class="modal fade" role="dialog" aria-hidden="true">
	<div class="modal-dialog modal-xl">
		<div class="modal-content">
			<div class="modal-header bg-primary text-center p-3">
				<h4 class="modal-title text-white" id="info-header-modalLabel">Adicionar Fornecedores</h4>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">×</span>
				</button>
			</div>
			<div class="modal-body">
				<form id="fornecedoresAddForm" class="pl-3 pr-3">
					<input type="hidden" id="<?php echo csrf_token() ?>fornecedoresAddForm"
						name="<?php echo csrf_token() ?>" value="<?php echo csrf_hash() ?>">

					<div class="row">
						<input type="hidden" id="codFornecedor" name="codFornecedor" class="form-control"
							placeholder="CodFornecedor" maxlength="11" required>
					</div>
					<div class="row">
						<div class="col-md-4">
							<div class="form-group">
								<label for="inscricao"> CPF/CNPJ: <span class="text-danger">*</span> </label>
								<input type="text" id="inscricao" name="inscricao" class="form-control"
									placeholder="CPF/CNPJ" maxlength="20" required>
							</div>
						</div>
						<div class="col-md-4">
							<div class="form-group">
								<label for="codTipo"> Tipo: <span class="text-danger">*</span> </label>
								<select id="codTipo" name="codTipo" class="custom-select" required>
									<option></option>
								</select>
							</div>
						</div>
					</div>
					<div class="row">
						<div class="col-md-4">
							<div class="form-group">
								<label for="nomeFantasia"> NomeFantasia: <span class="text-danger">*</span></label>
								<input type="text" id="nomeFantasia" name="nomeFantasia" class="form-control"
									placeholder="NomeFantasia" required maxlength="255">
							</div>
						</div>
						<div class="col-md-4">
							<div class="form-group">
								<label for="razaoSocial"> RazaoSocial: <span class="text-danger">*</span></label>
								<input type="text" id="razaoSocial" name="razaoSocial" class="form-control"
									placeholder="RazaoSocial" required maxlength="255">
							</div>
						</div>
						<div class="col-md-4">
							<div class="form-group">
								<label for="endereco"> Endereço: </label>
								<textarea cols="40" rows="5" id="endereco" name="endereco" class="form-control"
									placeholder="Endereço"></textarea>
							</div>
						</div>
					</div>
					<div class="row">
						<div class="col-md-4">
							<div class="form-group">
								<label for="cidade"> Cidade: <span class="text-danger">*</span></label>
								<input type="text" id="cidade" name="cidade" class="form-control" placeholder="Cidade"
									required maxlength="30">
							</div>
						</div>

						<div class="col-md-4">
							<div class="form-group">
								<label for="codEstadoFederacao"> UF: <span class="text-danger">*</span> </label>
								<select id="codEstadoFederacao" name="codEstadoFederacao" class="custom-select"
									required>
									<option></option>
								</select>
							</div>
						</div>
						<div class="col-md-4">
							<div class="form-group">
								<label for="cep"> CEP: </label>
								<input type="text" id="cep" name="cep" class="form-control" placeholder="CEP"
									maxlength="9">
							</div>
						</div>
					</div>
					<div class="row">
						<div class="col-md-4">
							<div class="form-group">
								<label for="contatos"> Contatos: </label>
								<textarea cols="40" rows="5" id="contatos" name="contatos" class="form-control"
									placeholder="Contatos"></textarea>
							</div>
						</div>
						<div class="col-md-4">
							<div class="form-group">
								<label for="email"> Email: </label>
								<input type="text" id="email" name="email" class="form-control" placeholder="Email"
									maxlength="255">
							</div>
						</div>
						<div class="col-md-4">
							<div class="form-group">
								<label for="website"> Website: </label>
								<input type="text" id="website" name="website" class="form-control"
									placeholder="Website" maxlength="255">
							</div>
						</div>
					</div>
					<div class="row">
						<div class="col-md-4">
							<div class="form-group">
								<label for="simples"> Simples: </label>
								<input type="text" id="simples" name="simples" class="form-control"
									placeholder="Simples" maxlength="3">
							</div>
						</div>
					</div>
					<div class="row">
						<div class="col-md-4">
							<div class="form-group">
								<label for="observacoes"> Observações: </label>
								<textarea cols="40" rows="5" id="observacoes" name="observacoes" class="form-control"
									placeholder="Observações"></textarea>
							</div>
						</div>
					</div>

					<div class="form-group text-center">
						<div class="btn-group">
							<button type="submit" class="btn btn-primary" data-toggle="tooltip" data-placement="top"
								title="Adicionar" id="fornecedoresAddForm-btn">Adicionar</button>
							<button type="button" class="btn btn-danger" data-toggle="tooltip" data-placement="top"
								title="Fechar" data-dismiss="modal">Fechar</button>
						</div>
					</div>
				</form>
			</div>
		</div><!-- /.modal-content -->
	</div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<div id="informacoesComplementaresAddModal" class="modal fade" role="dialog" aria-hidden="true">
	<div class="modal-dialog modal-xl">
		<div class="modal-content">
			<div class="modal-header bg-primary text-center p-3">
				<h4 class="modal-title text-white" id="info-header-modalLabel">Adicionar Informações Complementares</h4>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">×</span>
				</button>
			</div>
			<div class="modal-body">
				<form id="informacoesComplementaresAddForm" class="pl-3 pr-3">
					<input type="hidden" id="<?php echo csrf_token() ?>informacoesComplementaresAddForm"
						name="<?php echo csrf_token() ?>" value="<?php echo csrf_hash() ?>">
					<input type="hidden" id="codRequisicaoInforComplementar" name="codRequisicao" class="form-control"
						placeholder="CodRequisicao" maxlength="11" number="true" required>
					<input type="hidden" id="codInforComplementar" name="codInforComplementar" class="form-control"
						placeholder="CodInforComplementar" maxlength="11" required>

					<div class="row">

						<div class="col-md-4">
							<div class="form-group">
								<label for="codCategoriaInforComplementar"> Classificação: <span
										class="text-danger">*</span> </label>
								<select id="codCategoriaInforComplementar" name="codCategoria" class="custom-select"
									required>
									<option value=""></option>
								</select>
							</div>

						</div>

					</div>
					<div class="row">
						<div class="col-md-12">
							<div class="form-group">
								<label for="conteudo"> Conteúdo: <span class="text-danger">*</span> </label>
								<textarea cols="40" rows="5" id="conteudo" name="conteudo" class="form-control"
									placeholder="Informe aqui todas as informações complementares que você deseja adicionar ao processo."
									required></textarea>
							</div>
						</div>
					</div>

					<div class="form-group text-center">
						<div class="btn-group">
							<button type="submit" class="btn btn-primary" data-toggle="tooltip" data-placement="top"
								title="Adicionar" id="informacoesComplementaresAddForm-btn">Adicionar</button>
							<button type="button" class="btn btn-danger" data-toggle="tooltip" data-placement="top"
								title="Fechar" data-dismiss="modal">Fechar</button>
						</div>
					</div>
				</form>
			</div>
		</div><!-- /.modal-content -->
	</div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<!-- Add modal content -->
<div id="informacoesComplementaresEditModal" class="modal fade" role="dialog" aria-hidden="true">
	<div class="modal-dialog modal-xl">
		<div class="modal-content">
			<div class="modal-header bg-primary text-center p-3">
				<h4 class="modal-title text-white" id="info-header-modalLabel">Atualizar Informações Complementares</h4>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">×</span>
				</button>
			</div>
			<div class="modal-body">
				<form id="informacoesComplementaresEditForm" class="pl-3 pr-3">
					<input type="hidden" id="<?php echo csrf_token() ?>informacoesComplementaresAddForm"
						name="<?php echo csrf_token() ?>" value="<?php echo csrf_hash() ?>">
					<input type="hidden" id="codRequisicaoInforComplementar" name="codRequisicao" class="form-control"
						placeholder="CodRequisicao" maxlength="11" number="true" required>
					<input type="hidden" id="codInforComplementar" name="codInforComplementar" class="form-control"
						placeholder="CodInforComplementar" maxlength="11" required>

					<div class="row">

						<div class="col-md-4">
							<div class="form-group">
								<label for="codCategoriaInforComplementar"> Classificação: <span
										class="text-danger">*</span> </label>
								<select id="codCategoriaInforComplementar" name="codCategoria" class="custom-select"
									required>
									<option value=""></option>
								</select>
							</div>

						</div>

					</div>
					<div class="row">
						<div class="col-md-12">
							<div class="form-group">
								<label for="conteudo"> Conteúdo: <span class="text-danger">*</span> </label>
								<textarea cols="40" rows="5" id="conteudo" name="conteudo" class="form-control"
									placeholder="Informe aqui todas as informações complementares que você deseja adicionar ao processo."
									required>
								</textarea>
							</div>
						</div>
					</div>

					<div class="form-group text-center">
						<div class="btn-group">
							<button type="submit" class="btn btn-primary" data-toggle="tooltip" data-placement="top"
								title="Salvar" id="informacoesComplementaresEditForm-btn">Salvar</button>
							<button type="button" class="btn btn-danger" data-toggle="tooltip" data-placement="top"
								title="Fechar" data-dismiss="modal">Fechar</button>
						</div>
					</div>
				</form>

			</div>
		</div><!-- /.modal-content -->
	</div><!-- /.modal-dialog -->
</div><!-- /.modal -->


<?php
echo view('tema/rodape');
?>
<script>
	$(document).on('show.bs.modal', '.modal', function () {
		var zIndex = 1040 + (10 * $('.modal:visible').length);
		$(this).css('z-index', zIndex);
		setTimeout(function () {
			$('.modal-backdrop').not('.modal-stack').css('z-index', zIndex - 1).addClass('modal-stack');
		}, 0);
	});



	$(function () {

		codDepartamentoTmp = '<?php echo session()->codDepartamento ?>';


		$('#data_tablerequisicao').DataTable({
			"paging": true,
			"deferRender": true,
			"lengthChange": false,
			"searching": true,
			"ordering": false,
			"info": true,
			"autoWidth": false,
			"responsive": true,
			//order: [[5, 'desc']],
			"ajax": {
				"url": '<?php echo base_url('requisicao/getAll') ?>',
				"type": "POST",
				"dataType": "json",
				async: "true",
				data: {
					csrf_sandra: $("#csrf_sandraPrincipal").val(),
				},
			}
		});
	});

	function addrequisicao() {
		// reset the form 
		$("#requisicaoAddForm")[0].reset();
		$(".form-control").removeClass('is-invalid').removeClass('is-valid');
		$('#requisicaoAddModal').modal('show');





		$.ajax({
			url: '<?php echo base_url('Departamentos/listaDropDown') ?>',
			type: 'post',
			dataType: 'json',
			data: {
				csrf_sandra: $("#csrf_sandraPrincipal").val(),
			},
			success: function (listaDepartamentos) {

				$("#requisicaoAddForm #codDepartamento").select2({
					data: listaDepartamentos,
				})

				$("#requisicaoAddForm #codDepartamento").val(codDepartamentoTmp); // Select the option with a value of '1'
				$("#requisicaoAddForm #codDepartamento").trigger('change');
				$(document).on('select2:open', () => {
					document.querySelector('.select2-search__field').focus();
				});

			}
		})




		$.ajax({
			url: '<?php echo base_url('requisicao/listaDropDownTipoRequisicao') ?>',
			type: 'post',
			dataType: 'json',
			data: {
				csrf_sandra: $("#csrf_sandraPrincipal").val(),
			},
			success: function (listaTipoRequisicao) {

				$("#requisicaoAddForm #codTipoRequisicao").select2({
					data: listaTipoRequisicao,
				})

				$("#requisicaoAddForm #codTipoRequisicao").val(null); // Select the option with a value of '1'
				$("#requisicaoAddForm #codTipoRequisicao").trigger('change');
				$(document).on('select2:open', () => {
					document.querySelector('.select2-search__field').focus();
				});

			}
		})

		$.ajax({
			url: '<?php echo base_url('requisicao/listaDropDownClasserequisicao') ?>',
			type: 'post',
			dataType: 'json',
			data: {
				csrf_sandra: $("#csrf_sandraPrincipal").val(),
			},
			success: function (listaTipoServico) {

				$("#requisicaoAddForm #codClasseRequisicao").select2({
					data: listaTipoServico,
				})

				$("#requisicaoAddForm #codClasseRequisicao").val(null); // Select the option with a value of '1'
				$("#requisicaoAddForm #codClasseRequisicao").trigger('change');
				$(document).on('select2:open', () => {
					document.querySelector('.select2-search__field').focus();
				});

			}
		})


		$.validator.setDefaults({
			highlight: function (element) {
				$(element).addClass('is-invalid').removeClass('is-valid');
			},
			unhighlight: function (element) {
				$(element).removeClass('is-invalid').addClass('is-valid');
			},
			errorElement: 'div ',
			errorClass: 'invalid-feedback',
			errorPlacement: function (error, element) {
				if (element.parent('.input-group').length) {
					error.insertAfter(element.parent());
				} else if ($(element).is('.select')) {
					element.next().after(error);
				} else if (element.hasClass('select2')) {
					//error.insertAfter(element);
					error.insertAfter(element.next());
				} else if (element.hasClass('selectpicker')) {
					error.insertAfter(element.next());
				} else {
					error.insertAfter(element);
				}
			},

			submitHandler: function (form) {

				var form = $('#requisicaoAddForm');
				// remove the text-danger
				$(".text-danger").remove();

				$.ajax({
					url: '<?php echo base_url('requisicao/add') ?>',
					type: 'post',
					data: form.serialize(), // /converting the form data into array and sending it to server
					dataType: 'json',
					beforeSend: function () {
						//$('#requisicaoAddForm-btn').html('<i class="fa fa-spinner fa-spin"></i>');
					},
					success: function (response) {

						$('#requisicaoAddModal').modal('hide');
						if (response.success === true) {

							var Toast = Swal.mixin({
								toast: true,
								position: 'bottom-end',
								showConfirmButton: false,
								timer: 2000
							});
							Toast.fire({
								icon: 'success',
								title: response.messages
							}).then(function () {
								editrequisicao(response.codRequisicao);
								$('#data_tablerequisicao').DataTable().ajax.reload(null, false).draw(false);
							})

						} else {

							if (response.messages instanceof Object) {
								$.each(response.messages, function (index, value) {
									var id = $("#" + index);

									id.closest('.form-control')
										.removeClass('is-invalid')
										.removeClass('is-valid')
										.addClass(value.length > 0 ? 'is-invalid' : 'is-valid');

									id.after(value);

								});
							} else {

								var Toast = Swal.mixin({
									toast: true,
									position: 'bottom-end',
									showConfirmButton: false,
									timer: 2000
								});
								Toast.fire({
									icon: 'error',
									title: response.messages
								})

							}
						}
						$('#requisicaoAddForm-btn').html('Adicionar');
					}
				});

				return false;
			}
		});
		$('#requisicaoAddForm').validate();
	}

	function editrequisicao(codRequisicao) {
		$.ajax({
			url: '<?php echo base_url('requisicao/getOne') ?>',
			type: 'post',
			data: {
				codRequisicao: codRequisicao,
				csrf_sandra: $("#csrf_sandraPrincipal").val(),
			},
			dataType: 'json',
			success: function (response) {
				// reset the form 
				$("#requisicaoEditForm")[0].reset();
				$(".form-control").removeClass('is-invalid').removeClass('is-valid');
				$('#requisicaoEditModal').modal('show');

				$("#requisicaoEditForm #codRequisicao").val(response.codRequisicao);
				$("#requisicaoEditForm #descricao").val(response.descricao);
				$("#requisicaoEditForm #dataRequisicao").val(response.dataRequisicaoV);
				$("#requisicaoEditForm #valorTotal").val(response.valorTotal);
				$("#requisicaoEditForm #matSau").val(response.matSau);
				$("#requisicaoEditForm #carDisp").val(response.carDisp);


				$("#itensRequisicaoAddForm #codRequisicao").val(codRequisicao);

				$("#informacoesComplementaresAddForm #codRequisicaoInforComplementar").val(codRequisicao);


				$(function () {
					$('#data_tableitensRequisicao').DataTable({
						"bDestroy": true,
						"paging": true,
						"deferRender": true,
						"lengthChange": false,
						"searching": true,
						"ordering": true,
						"info": true,
						"autoWidth": false,
						"responsive": true,
						"ajax": {
							"url": '<?php echo base_url('itensRequisicao/itensRequisicao') ?>',
							"type": "POST",
							"dataType": "json",
							async: "true",
							data: {
								codRequisicao: codRequisicao,
								csrf_sandra: $("#csrf_sandraPrincipal").val(),
							},
						}
					});
				});



				$(function () {
					$('#data_tableinformacoesComplementares').DataTable({
						"bDestroy": true,
						"paging": true,
						"deferRender": true,
						"lengthChange": false,
						"searching": true,
						"ordering": true,
						"info": true,
						"autoWidth": false,
						"responsive": true,
						"ajax": {
							"url": '<?php echo base_url('informacoesComplementares/informacoesComplementaresRequisicao') ?>',
							"type": "POST",
							"dataType": "json",
							async: "true",
							data: {
								codRequisicao: codRequisicao,
								csrf_sandra: $("#csrf_sandraPrincipal").val(),
							},
						}
					});
				});




				$.ajax({
					url: '<?php echo base_url('Departamentos/listaDropDown') ?>',
					type: 'post',
					dataType: 'json',
					data: {
						csrf_sandra: $("#csrf_sandraPrincipal").val(),
					},
					success: function (listaDepartamentos) {

						$("#requisicaoEditForm #codDepartamento").select2({
							data: listaDepartamentos,
						})

						$("#requisicaoEditForm #codDepartamento").val(response.codDepartamento); // Select the option with a value of '1'
						$("#requisicaoEditForm #codDepartamento").trigger('change');
						$(document).on('select2:open', () => {
							document.querySelector('.select2-search__field').focus();
						});

					}
				});


				$.ajax({
					url: '<?php echo base_url('requisicao/listaDropDownTipoRequisicao') ?>',
					type: 'post',
					dataType: 'json',
					data: {
						csrf_sandra: $("#csrf_sandraPrincipal").val(),
					},
					success: function (listaTipoRequisicao) {

						$("#requisicaoEditForm #codTipoRequisicao").select2({
							data: listaTipoRequisicao,
						})

						$("#requisicaoEditForm #codTipoRequisicao").val(response.codTipoRequisicao); // Select the option with a value of '1'
						$("#requisicaoEditForm #codTipoRequisicao").trigger('change');
						$(document).on('select2:open', () => {
							document.querySelector('.select2-search__field').focus();
						});

					}
				})

				$.ajax({
					url: '<?php echo base_url('requisicao/listaDropDownClasserequisicao') ?>',
					type: 'post',
					dataType: 'json',
					data: {
						csrf_sandra: $("#csrf_sandraPrincipal").val(),
					},
					success: function (listaTipoServico) {

						$("#requisicaoEditForm #codClasseRequisicao").select2({
							data: listaTipoServico,
						})

						$("#requisicaoEditForm #codClasseRequisicao").val(response.codClasseRequisicao); // Select the option with a value of '1'
						$("#requisicaoEditForm #codClasseRequisicao").trigger('change');
						$(document).on('select2:open', () => {
							document.querySelector('.select2-search__field').focus();
						});

					}
				});





				$.validator.setDefaults({



					highlight: function (element) {
						$(element).addClass('is-invalid').removeClass('is-valid');
					},
					unhighlight: function (element) {
						$(element).removeClass('is-invalid').addClass('is-valid');
					},
					errorElement: 'div ',
					errorClass: 'invalid-feedback',
					errorPlacement: function (error, element) {
						if (element.parent('.input-group').length) {
							error.insertAfter(element.parent());
						} else if ($(element).is('.select')) {
							element.next().after(error);
						} else if (element.hasClass('select2')) {
							//error.insertAfter(element);
							error.insertAfter(element.next());
						} else if (element.hasClass('selectpicker')) {
							error.insertAfter(element.next());
						} else {
							error.insertAfter(element);
						}
					},

					submitHandler: function (form) {
						var form = $('#requisicaoEditForm');
						$(".text-danger").remove();
						$.ajax({
							url: '<?php echo base_url('requisicao/edit') ?>',
							type: 'post',
							data: form.serialize(),
							dataType: 'json',
							beforeSend: function () {
								//$('#requisicaoEditForm-btn').html('<i class="fa fa-spinner fa-spin"></i>');
							},
							success: function (response) {

								if (response.success === true) {

									$('#requisicaoEditModal').modal('hide');


									var Toast = Swal.mixin({
										toast: true,
										position: 'bottom-end',
										showConfirmButton: false,
										timer: 2000
									});
									Toast.fire({
										icon: 'success',
										title: response.messages
									}).then(function () {
										$('#data_tablerequisicao').DataTable().ajax.reload(null, false).draw(false);
									})

								} else {

									if (response.messages instanceof Object) {
										$.each(response.messages, function (index, value) {
											var id = $("#" + index);

											id.closest('.form-control')
												.removeClass('is-invalid')
												.removeClass('is-valid')
												.addClass(value.length > 0 ? 'is-invalid' : 'is-valid');

											id.after(value);

										});
									} else {
										var Toast = Swal.mixin({
											toast: true,
											position: 'bottom-end',
											showConfirmButton: false,
											timer: 2000
										});
										Toast.fire({
											icon: 'error',
											title: response.messages
										})

									}
								}
								$('#requisicaoEditForm-btn').html('Salvar');
							}
						});

						return false;
					}
				});
				$('#requisicaoEditForm').validate();

			}
		});
	}

	function removerequisicao(codRequisicao) {
		Swal.fire({
			title: 'Você tem certeza que deseja remover?',
			text: "Você não poderá reverter após a confirmação",
			icon: 'warning',
			showCancelButton: true,
			confirmButtonColor: '#3085d6',
			cancelButtonColor: '#d33',
			confirmButtonText: 'Confirmar',
			cancelButtonText: 'Cancelar'
		}).then((result) => {

			if (result.value) {
				$.ajax({
					url: '<?php echo base_url('requisicao/remove') ?>',
					type: 'post',
					data: {
						codRequisicao: codRequisicao,
						csrf_sandra: $("#csrf_sandraPrincipal").val(),
					},
					dataType: 'json',
					success: function (response) {

						if (response.success === true) {
							var Toast = Swal.mixin({
								toast: true,
								position: 'bottom-end',
								showConfirmButton: false,
								timer: 2000
							});
							Toast.fire({
								icon: 'success',
								title: response.messages
							}).then(function () {
								$('#data_tablerequisicao').DataTable().ajax.reload(null, false).draw(false);
							})
						} else {
							var Toast = Swal.mixin({
								toast: true,
								position: 'bottom-end',
								showConfirmButton: false,
								timer: 2000
							});
							Toast.fire({
								icon: 'error',
								title: response.messages
							})


						}
					}
				});
			}
		})
	}


	function additensRequisicao() {
		// reset the form 
		$("#itensRequisicaoAddForm")[0].reset();
		$(".form-control").removeClass('is-invalid').removeClass('is-valid');
		$('#itensRequisicaoAddModal').modal('show');
		$.ajax({
			url: '<?php echo base_url('itensRequisicao/listaDropDownUnidades') ?>',
			type: 'post',
			dataType: 'json',
			data: {
				csrf_sandra: $("#csrf_sandraPrincipal").val(),
			},
			success: function (unidadeAdd) {

				$("#itensRequisicaoAddForm #unidade").select2({
					data: unidadeAdd,
				})

				$('#itensRequisicaoAddForm #unidade').val(1);
				$('#itensRequisicaoAddForm #unidade').trigger('change');
				$(document).on('select2:open', () => {
					document.querySelector('.select2-search__field').focus();
				});
			}
		})




		$.ajax({
			url: '<?php echo base_url('itensRequisicao/listaDropDownTipoMaterial') ?>',
			type: 'post',
			dataType: 'json',
			data: {
				csrf_sandra: $("#csrf_sandraPrincipal").val(),
			},
			success: function (tipoMaterialAdd) {

				$("#itensRequisicaoAddForm #tipoMaterial").select2({
					data: tipoMaterialAdd,
				})

				$('#itensRequisicaoAddForm #tipoMaterial').val(null);
				$('#itensRequisicaoAddForm #tipoMaterial').trigger('change');
				$(document).on('select2:open', () => {
					document.querySelector('.select2-search__field').focus();
				});
			}
		})





		// submit the add from 
		$.validator.setDefaults({
			highlight: function (element) {
				$(element).addClass('is-invalid').removeClass('is-valid');
			},
			unhighlight: function (element) {
				$(element).removeClass('is-invalid').addClass('is-valid');
			},
			errorElement: 'div ',
			errorClass: 'invalid-feedback',
			errorPlacement: function (error, element) {
				if (element.parent('.input-group').length) {
					error.insertAfter(element.parent());
				} else if ($(element).is('.select')) {
					element.next().after(error);
				} else if (element.hasClass('select2')) {
					//error.insertAfter(element);
					error.insertAfter(element.next());
				} else if (element.hasClass('selectpicker')) {
					error.insertAfter(element.next());
				} else {
					error.insertAfter(element);
				}
			},

			submitHandler: function (form) {

				var form = $('#itensRequisicaoAddForm');
				// remove the text-danger
				$(".text-danger").remove();

				$.ajax({
					url: '<?php echo base_url('itensRequisicao/add') ?>',
					type: 'post',
					data: form.serialize(), // /converting the form data into array and sending it to server
					dataType: 'json',
					beforeSend: function () {
						//$('#itensRequisicaoAddForm-btn').html('<i class="fa fa-spinner fa-spin"></i>');
					},
					success: function (response) {
						$('#itensRequisicaoAddModal').modal('hide');
						if (response.success === true) {

							var Toast = Swal.mixin({
								toast: true,
								position: 'bottom-end',
								showConfirmButton: false,
								timer: 2000
							});
							Toast.fire({
								icon: 'success',
								title: response.messages
							}).then(function () {
								edititensRequisicao(response.codRequisicaoItem);
								$('#data_tableitensRequisicao').DataTable().ajax.reload(null, false).draw(false);
							})

						} else {

							if (response.messages instanceof Object) {
								$.each(response.messages, function (index, value) {
									var id = $("#" + index);

									id.closest('.form-control')
										.removeClass('is-invalid')
										.removeClass('is-valid')
										.addClass(value.length > 0 ? 'is-invalid' : 'is-valid');

									id.after(value);

								});
							} else {

								var Toast = Swal.mixin({
									toast: true,
									position: 'bottom-end',
									showConfirmButton: false,
									timer: 2000
								});
								Toast.fire({
									icon: 'error',
									title: response.messages
								})

							}
						}
						$('#itensRequisicaoAddForm-btn').html('Adicionar');
					}
				});

				return false;
			}
		});
		$('#itensRequisicaoAddForm').validate();
	}

	function edititensRequisicao(codRequisicaoItem) {
		$.ajax({
			url: '<?php echo base_url('itensRequisicao/getOne') ?>',
			type: 'post',
			data: {
				codRequisicaoItem: codRequisicaoItem,
				csrf_sandra: $("#csrf_sandraPrincipal").val(),
			},
			dataType: 'json',
			success: function (response) {
				// reset the form 
				$("#itensRequisicaoEditForm")[0].reset();
				$(".form-control").removeClass('is-invalid').removeClass('is-valid');
				$('#itensRequisicaoEditModal').modal('show');

				$("#itensRequisicaoEditForm #codRequisicaoItem").val(response.codRequisicaoItem);

				$("#orcamentosAddForm #codRequisicaoItemOrcamentoAdd").val(response.codRequisicaoItem);

				$("#itensRequisicaoEditForm #nrRef").val(response.nrRef);
				$("#itensRequisicaoEditForm #descricao").val(response.descricao);
				$("#itensRequisicaoEditForm #unidade").val(response.unidade);
				$("#itensRequisicaoEditForm #qtdeSol").val(response.qtde_sol);
				$("#itensRequisicaoEditForm #valorUnit").val(response.valorUnit);
				$("#itensRequisicaoEditForm #metodoCalculo").val(response.metodoCalculo);
				$("#itensRequisicaoEditForm #codSiasg").val(response.cod_siasg);
				$("#itensRequisicaoEditForm #tipoMaterial").val(response.tipoMaterial);
				$("#itensRequisicaoEditForm #obs").val(response.obs);


				$(function () {
					$('#data_tableorcamentos').DataTable({
						"bDestroy": true,
						"paging": true,
						"deferRender": true,
						"lengthChange": false,
						"searching": true,
						"ordering": true,
						"info": true,
						"autoWidth": false,
						"responsive": true,
						"ajax": {
							"url": '<?php echo base_url('orcamentos/orcamentosItem') ?>',
							"type": "POST",
							"dataType": "json",
							async: "true",
							data: {
								codRequisicaoItem: codRequisicaoItem,
								csrf_sandra: $("#csrf_sandraPrincipal").val(),
							},
						}
					});
				});



				$.ajax({
					url: '<?php echo base_url('itensRequisicao/listaDropDownUnidades') ?>',
					type: 'post',
					dataType: 'json',
					data: {
						csrf_sandra: $("#csrf_sandraPrincipal").val(),
					},
					success: function (unidadeAdd) {

						$("#itensRequisicaoEditForm #unidade").select2({
							data: unidadeAdd,
						})

						$('#itensRequisicaoEditForm #unidade').val(response.unidade);
						$('#itensRequisicaoEditForm #unidade').trigger('change');
						$(document).on('select2:open', () => {
							document.querySelector('.select2-search__field').focus();
						});
					}
				})




				$.ajax({
					url: '<?php echo base_url('itensRequisicao/listaDropDownTipoMaterial') ?>',
					type: 'post',
					dataType: 'json',
					data: {
						csrf_sandra: $("#csrf_sandraPrincipal").val(),
					},
					success: function (tipoMaterialEdit) {

						$("#itensRequisicaoEditForm #tipoMaterial").select2({
							data: tipoMaterialEdit,
						})

						$('#itensRequisicaoEditForm #tipoMaterial').val(response.tipoMaterial);
						$('#itensRequisicaoEditForm #tipoMaterial').trigger('change');
						$(document).on('select2:open', () => {
							document.querySelector('.select2-search__field').focus();
						});
					}
				})








				// submit the edit from 
				$.validator.setDefaults({
					highlight: function (element) {
						$(element).addClass('is-invalid').removeClass('is-valid');
					},
					unhighlight: function (element) {
						$(element).removeClass('is-invalid').addClass('is-valid');
					},
					errorElement: 'div ',
					errorClass: 'invalid-feedback',
					errorPlacement: function (error, element) {
						if (element.parent('.input-group').length) {
							error.insertAfter(element.parent());
						} else if ($(element).is('.select')) {
							element.next().after(error);
						} else if (element.hasClass('select2')) {
							//error.insertAfter(element);
							error.insertAfter(element.next());
						} else if (element.hasClass('selectpicker')) {
							error.insertAfter(element.next());
						} else {
							error.insertAfter(element);
						}
					},

					submitHandler: function (form) {
						var form = $('#itensRequisicaoEditForm');
						$(".text-danger").remove();
						$.ajax({
							url: '<?php echo base_url('itensRequisicao/edit') ?>',
							type: 'post',
							data: form.serialize(),
							dataType: 'json',
							beforeSend: function () {
								//$('#itensRequisicaoEditForm-btn').html('<i class="fa fa-spinner fa-spin"></i>');
							},
							success: function (response) {

								if (response.success === true) {

									$('#itensRequisicaoEditModal').modal('hide');


									var Toast = Swal.mixin({
										toast: true,
										position: 'bottom-end',
										showConfirmButton: false,
										timer: 2000
									});
									Toast.fire({
										icon: 'success',
										title: response.messages
									}).then(function () {
										$('#data_tableitensRequisicao').DataTable().ajax.reload(null, false).draw(false);
									})

								} else {

									if (response.messages instanceof Object) {
										$.each(response.messages, function (index, value) {
											var id = $("#" + index);

											id.closest('.form-control')
												.removeClass('is-invalid')
												.removeClass('is-valid')
												.addClass(value.length > 0 ? 'is-invalid' : 'is-valid');

											id.after(value);

										});
									} else {
										var Toast = Swal.mixin({
											toast: true,
											position: 'bottom-end',
											showConfirmButton: false,
											timer: 2000
										});
										Toast.fire({
											icon: 'error',
											title: response.messages
										})

									}
								}
								$('#itensRequisicaoEditForm-btn').html('Salvar');
							}
						});

						return false;
					}
				});
				$('#itensRequisicaoEditForm').validate();

			}
		});
	}

	function removeitensRequisicao(codRequisicaoItem) {
		Swal.fire({
			title: 'Você tem certeza que deseja remover?',
			text: "Você não poderá reverter após a confirmação",
			icon: 'warning',
			showCancelButton: true,
			confirmButtonColor: '#3085d6',
			cancelButtonColor: '#d33',
			confirmButtonText: 'Confirmar',
			cancelButtonText: 'Cancelar'
		}).then((result) => {

			if (result.value) {
				$.ajax({
					url: '<?php echo base_url('itensRequisicao/remove') ?>',
					type: 'post',
					data: {
						codRequisicaoItem: codRequisicaoItem,
						csrf_sandra: $("#csrf_sandraPrincipal").val(),
					},
					dataType: 'json',
					success: function (response) {

						if (response.success === true) {
							var Toast = Swal.mixin({
								toast: true,
								position: 'bottom-end',
								showConfirmButton: false,
								timer: 2000
							});
							Toast.fire({
								icon: 'success',
								title: response.messages
							}).then(function () {
								$('#data_tableitensRequisicao').DataTable().ajax.reload(null, false).draw(false);
							})
						} else {
							var Toast = Swal.mixin({
								toast: true,
								position: 'bottom-end',
								showConfirmButton: false,
								timer: 2000
							});
							Toast.fire({
								icon: 'error',
								title: response.messages
							})


						}
					}
				});
			}
		})
	}


	function addorcamentos() {
		// reset the form 
		$("#orcamentosAddForm")[0].reset();
		$(".form-control").removeClass('is-invalid').removeClass('is-valid');
		$('#orcamentosAddModal').modal('show');

		$("#orcamentosAddForm #metodoCalculoAddOrcamento").val($("#itensRequisicaoEditForm #metodoCalculo").val());


		$.ajax({
			url: '<?php echo base_url('itensRequisicao/listaDropDownTipoOrcamento') ?>',
			type: 'post',
			dataType: 'json',
			data: {
				csrf_sandra: $("#csrf_sandraPrincipal").val(),
			},
			success: function (TipoOrcamento) {

				$("#orcamentosAddForm #codTipoOrcamento").select2({
					data: TipoOrcamento,
				})

				$('#orcamentosAddForm #codTipoOrcamento').val(null);
				$('#orcamentosAddForm #codTipoOrcamento').trigger('change');
				$(document).on('select2:open', () => {
					document.querySelector('.select2-search__field').focus();
				});
			}
		})


		$('#codFornecedor').html('').select2({
			data: [{
				id: '',
				text: ''
			}]
		});


		$.ajax({
			url: '<?php echo base_url('fornecedores/listaDropDownFornecedores') ?>',
			type: 'post',
			dataType: 'json',
			data: {
				csrf_sandra: $("#csrf_sandraPrincipal").val(),
			},
			success: function (Fornecedores) {

				$("#orcamentosAddForm #codFornecedor").select2({
					data: Fornecedores,
					allowClear: true,
					placeholder: 'Procurar Pessoa',
					minimumInputLength: 4,
					quietMillis: 2,
					language: {
						noResults: function () {
							return `<button style="width: 100%" type="button"
										class="btn btn-xs btn-primary" 
										onClick='addfornecedores()'>+ Adicionar Fornecedor</button>
										`;
						}
					},

					escapeMarkup: function (markup) {
						return markup;
					}
				})


				$('#orcamentosAddForm #codFornecedor').val();
				$('#orcamentosAddForm #codFornecedor').trigger('change');
				$(document).on('select2:open', () => {
					document.querySelector('.select2-search__field').focus();
				});
			}
		})




		// submit the add from 
		$.validator.setDefaults({
			highlight: function (element) {
				$(element).addClass('is-invalid').removeClass('is-valid');
			},
			unhighlight: function (element) {
				$(element).removeClass('is-invalid').addClass('is-valid');
			},
			errorElement: 'div ',
			errorClass: 'invalid-feedback',
			errorPlacement: function (error, element) {
				if (element.parent('.input-group').length) {
					error.insertAfter(element.parent());
				} else if ($(element).is('.select')) {
					element.next().after(error);
				} else if (element.hasClass('select2')) {
					//error.insertAfter(element);
					error.insertAfter(element.next());
				} else if (element.hasClass('selectpicker')) {
					error.insertAfter(element.next());
				} else {
					error.insertAfter(element);
				}
			},

			submitHandler: function (form) {

				var form = $('#orcamentosAddForm');
				// remove the text-danger
				$(".text-danger").remove();

				$.ajax({
					url: '<?php echo base_url('orcamentos/add') ?>',
					type: 'post',
					data: form.serialize(), // /converting the form data into array and sending it to server
					dataType: 'json',
					beforeSend: function () {
						//$('#orcamentosAddForm-btn').html('<i class="fa fa-spinner fa-spin"></i>');
					},
					success: function (response) {

						if (response.success === true) {
							$('#orcamentosAddModal').modal('hide');

							if (response.valor !== true) {
								$("#itensRequisicaoEditForm #valorUnit").val(response.valor);

							}


							var Toast = Swal.mixin({
								toast: true,
								position: 'bottom-end',
								showConfirmButton: false,
								timer: 2000
							});
							Toast.fire({
								icon: 'success',
								title: response.messages
							}).then(function () {
								$('#data_tableorcamentos').DataTable().ajax.reload(null, false).draw(false);
							})

						} else {

							if (response.messages instanceof Object) {
								$.each(response.messages, function (index, value) {
									var id = $("#" + index);

									id.closest('.form-control')
										.removeClass('is-invalid')
										.removeClass('is-valid')
										.addClass(value.length > 0 ? 'is-invalid' : 'is-valid');

									id.after(value);

								});
							} else {

								var Toast = Swal.mixin({
									toast: true,
									position: 'bottom-end',
									showConfirmButton: false,
									timer: 2000
								});
								Toast.fire({
									icon: 'error',
									title: response.messages
								})

							}
						}
						$('#orcamentosAddForm-btn').html('Adicionar');
					}
				});

				return false;
			}
		});
		$('#orcamentosAddForm').validate();
	}

	function editorcamentos(codOrcamento) {
		$.ajax({
			url: '<?php echo base_url('orcamentos/getOne') ?>',
			type: 'post',
			data: {
				codOrcamento: codOrcamento,
				csrf_sandra: $("#csrf_sandraPrincipal").val(),
			},
			dataType: 'json',
			success: function (response) {
				// reset the form 
				$("#orcamentosEditForm")[0].reset();
				$(".form-control").removeClass('is-invalid').removeClass('is-valid');
				$('#orcamentosEditModal').modal('show');

				$("#orcamentosEditForm #codOrcamento").val(response.codOrcamento);
				$("#orcamentosEditForm #razaoSocial").val(response.razaoSocial);
				$("#orcamentosEditForm #valorUnitario").val(response.valorUnitario);
				$("#orcamentosEditForm #codTipoOrcamento").val(response.codTipoOrcamento);
				$("#orcamentosEditForm #dataOrcamento").val(response.dataOrcamento);
				$("#orcamentosEditForm #codFornecedor").val(response.codFornecedor);
				$("#orcamentosEditForm #codRequisicaoItemOrcamentoEdit").val(response.codRequisicaoItem);

				$("#orcamentosEditForm #metodoCalculoEditOrcamento").val($("#itensRequisicaoEditForm #metodoCalculo").val());



				$.ajax({
					url: '<?php echo base_url('itensRequisicao/listaDropDownTipoOrcamento') ?>',
					type: 'post',
					dataType: 'json',
					data: {
						csrf_sandra: $("#csrf_sandraPrincipal").val(),
					},
					success: function (TipoOrcamento) {

						$("#orcamentosEditForm #codTipoOrcamento").select2({
							data: TipoOrcamento,
						})

						$('#orcamentosEditForm #codTipoOrcamento').val(response.codTipoOrcamento);
						$('#orcamentosEditForm #codTipoOrcamento').trigger('change');
						$(document).on('select2:open', () => {
							document.querySelector('.select2-search__field').focus();
						});
					}
				})



				// submit the edit from 
				$.validator.setDefaults({
					highlight: function (element) {
						$(element).addClass('is-invalid').removeClass('is-valid');
					},
					unhighlight: function (element) {
						$(element).removeClass('is-invalid').addClass('is-valid');
					},
					errorElement: 'div ',
					errorClass: 'invalid-feedback',
					errorPlacement: function (error, element) {
						if (element.parent('.input-group').length) {
							error.insertAfter(element.parent());
						} else if ($(element).is('.select')) {
							element.next().after(error);
						} else if (element.hasClass('select2')) {
							//error.insertAfter(element);
							error.insertAfter(element.next());
						} else if (element.hasClass('selectpicker')) {
							error.insertAfter(element.next());
						} else {
							error.insertAfter(element);
						}
					},

					submitHandler: function (form) {
						var form = $('#orcamentosEditForm');
						$(".text-danger").remove();
						$.ajax({
							url: '<?php echo base_url('orcamentos/edit') ?>',
							type: 'post',
							data: form.serialize(),
							dataType: 'json',
							beforeSend: function () {
								//$('#orcamentosEditForm-btn').html('<i class="fa fa-spinner fa-spin"></i>');
							},
							success: function (response) {

								if (response.success === true) {

									$('#orcamentosEditModal').modal('hide');



									if (response.valor !== true) {
										$("#itensRequisicaoEditForm #valorUnit").val(response.valor);

									}

									var Toast = Swal.mixin({
										toast: true,
										position: 'bottom-end',
										showConfirmButton: false,
										timer: 2000
									});
									Toast.fire({
										icon: 'success',
										title: response.messages
									}).then(function () {
										$('#data_tableorcamentos').DataTable().ajax.reload(null, false).draw(false);
									})

								} else {

									if (response.messages instanceof Object) {
										$.each(response.messages, function (index, value) {
											var id = $("#" + index);

											id.closest('.form-control')
												.removeClass('is-invalid')
												.removeClass('is-valid')
												.addClass(value.length > 0 ? 'is-invalid' : 'is-valid');

											id.after(value);

										});
									} else {
										var Toast = Swal.mixin({
											toast: true,
											position: 'bottom-end',
											showConfirmButton: false,
											timer: 2000
										});
										Toast.fire({
											icon: 'error',
											title: response.messages
										})

									}
								}
								$('#orcamentosEditForm-btn').html('Salvar');
							}
						});

						return false;
					}
				});
				$('#orcamentosEditForm').validate();

			}
		});
	}

	function removeorcamentos(codOrcamento) {
		Swal.fire({
			title: 'Você tem certeza que deseja remover?',
			text: "Você não poderá reverter após a confirmação",
			icon: 'warning',
			showCancelButton: true,
			confirmButtonColor: '#3085d6',
			cancelButtonColor: '#d33',
			confirmButtonText: 'Confirmar',
			cancelButtonText: 'Cancelar'
		}).then((result) => {

			if (result.value) {
				$.ajax({
					url: '<?php echo base_url('orcamentos/remove') ?>',
					type: 'post',
					data: {
						codOrcamento: codOrcamento,
						csrf_sandra: $("#csrf_sandraPrincipal").val(),
					},
					dataType: 'json',
					success: function (response) {

						if (response.success === true) {
							var Toast = Swal.mixin({
								toast: true,
								position: 'bottom-end',
								showConfirmButton: false,
								timer: 2000
							});
							Toast.fire({
								icon: 'success',
								title: response.messages
							}).then(function () {
								$('#data_tableorcamentos').DataTable().ajax.reload(null, false).draw(false);
							})
						} else {
							var Toast = Swal.mixin({
								toast: true,
								position: 'bottom-end',
								showConfirmButton: false,
								timer: 2000
							});
							Toast.fire({
								icon: 'error',
								title: response.messages
							})


						}
					}
				});
			}
		})
	}



	function addfornecedores() {
		// reset the form 
		$("#fornecedoresAddForm")[0].reset();
		$(".form-control").removeClass('is-invalid').removeClass('is-valid');
		$('#fornecedoresAddModal').modal('show');


		$("#orcamentosAddForm #codFornecedor").select2('close');



		$.ajax({
			url: '<?php echo base_url('fornecedores/listaDropDownTipoFornecedor') ?>',
			type: 'post',
			dataType: 'json',
			data: {
				csrf_sandra: $("#csrf_sandraPrincipal").val(),
			},
			success: function (tipoFornecedor) {

				$("#fornecedoresAddForm #codTipo").select2({
					data: tipoFornecedor,
				})

				$("#fornecedoresAddForm #codTipo").val(null); // Select the option with a value of '1'
				$("#fornecedoresAddForm #codTipo").trigger('change');
				$(document).on('select2:open', () => {
					document.querySelector('.select2-search__field').focus();
				});

			}
		})




		$.ajax({
			url: '<?php echo base_url('fornecedores/listaDropDownEstadosFederacao') ?>',
			type: 'post',
			dataType: 'json',
			data: {
				csrf_sandra: $("#csrf_sandraPrincipal").val(),
			},
			success: function (estadosFederacao) {

				$("#fornecedoresAddForm #codEstadoFederacao").select2({
					data: estadosFederacao,
				})

				$("#fornecedoresAddForm #codEstadoFederacao").val(null); // Select the option with a value of '1'
				$("#fornecedoresAddForm #codEstadoFederacao").trigger('change');
				$(document).on('select2:open', () => {
					document.querySelector('.select2-search__field').focus();
				});

			}
		})




		// submit the add from 
		$.validator.setDefaults({
			highlight: function (element) {
				$(element).addClass('is-invalid').removeClass('is-valid');
			},
			unhighlight: function (element) {
				$(element).removeClass('is-invalid').addClass('is-valid');
			},
			errorElement: 'div ',
			errorClass: 'invalid-feedback',
			errorPlacement: function (error, element) {
				if (element.parent('.input-group').length) {
					error.insertAfter(element.parent());
				} else if ($(element).is('.select')) {
					element.next().after(error);
				} else if (element.hasClass('select2')) {
					//error.insertAfter(element);
					error.insertAfter(element.next());
				} else if (element.hasClass('selectpicker')) {
					error.insertAfter(element.next());
				} else {
					error.insertAfter(element);
				}
			},

			submitHandler: function (form) {

				var form = $('#fornecedoresAddForm');
				// remove the text-danger
				$(".text-danger").remove();


				$.ajax({
					url: '<?php echo base_url('fornecedores/add') ?>',
					type: 'post',
					data: form.serialize(), // /converting the form data into array and sending it to server
					dataType: 'json',
					beforeSend: function () {
						//$('#fornecedoresAddForm-btn').html('<i class="fa fa-spinner fa-spin"></i>');
					},
					success: function (response) {

						if (response.success === true) {
							$('#fornecedoresAddModal').modal('hide');


							$('#codFornecedor').html('').select2({
								data: [{
									id: '',
									text: ''
								}]
							});


							$.ajax({
								url: '<?php echo base_url('fornecedores/listaDropDownFornecedores') ?>',
								type: 'post',
								dataType: 'json',
								data: {
									csrf_sandra: $("#csrf_sandraPrincipal").val(),
								},
								success: function (Fornecedores) {

									$("#orcamentosAddForm #codFornecedor").select2({
										data: Fornecedores,
										allowClear: true,
										placeholder: 'Procurar Pessoa',
										minimumInputLength: 4,
										quietMillis: 2,
										language: {
											noResults: function () {
												return `<button style="width: 100%" type="button"
										class="btn btn-xs btn-primary" 
										onClick='addfornecedores()'>+ Adicionar Fornecedor</button>
										`;
											}
										},

										escapeMarkup: function (markup) {
											return markup;
										}
									})


									$('#orcamentosAddForm #codFornecedor').val(response.codFornecedor);
									$('#orcamentosAddForm #codFornecedor').trigger('change');
									$(document).on('select2:open', () => {
										document.querySelector('.select2-search__field').focus();
									});
								}
							})




							var Toast = Swal.mixin({
								toast: true,
								position: 'bottom-end',
								showConfirmButton: false,
								timer: 2000
							});
							Toast.fire({
								icon: 'success',
								title: response.messages
							}).then(function () {
								$('#data_tablefornecedores').DataTable().ajax.reload(null, false).draw(false);
							})

						} else {

							if (response.messages instanceof Object) {
								$.each(response.messages, function (index, value) {
									var id = $("#" + index);

									id.closest('.form-control')
										.removeClass('is-invalid')
										.removeClass('is-valid')
										.addClass(value.length > 0 ? 'is-invalid' : 'is-valid');

									id.after(value);

								});
							} else {

								var Toast = Swal.mixin({
									toast: true,
									position: 'bottom-end',
									showConfirmButton: false,
									timer: 2000
								});
								Toast.fire({
									icon: 'error',
									title: response.messages
								})

							}
						}
						$('#fornecedoresAddForm-btn').html('Adicionar');
					}
				});

				return false;
			}
		});
		$('#fornecedoresAddForm').validate();
	}


	function addinformacoesComplementares() {
		// reset the form 
		$("#informacoesComplementaresAddForm")[0].reset();
		$(".form-control").removeClass('is-invalid').removeClass('is-valid');
		$('#informacoesComplementaresAddModal').modal('show');


		$.ajax({
			url: '<?php echo base_url('InformacoesComplementares/listaDropDownCategoriaInformacoesComplementares') ?>',
			type: 'post',
			dataType: 'json',
			data: {
				csrf_sandra: $("#csrf_sandraPrincipal").val(),
			},
			success: function (listaInformacoesComplementaresAddForm) {

				$("#informacoesComplementaresAddForm #codCategoriaInforComplementar").select2({
					data: listaInformacoesComplementaresAddForm,
				})

				$("#informacoesComplementaresAddForm #codCategoriaInforComplementar").val(null); // Select the option with a value of '1'
				$("#informacoesComplementaresAddForm #codCategoriaInforComplementar").trigger('change');
				$(document).on('select2:open', () => {
					document.querySelector('.select2-search__field').focus();
				});

			}
		})




		// submit the add from 
		$.validator.setDefaults({
			highlight: function (element) {
				$(element).addClass('is-invalid').removeClass('is-valid');
			},
			unhighlight: function (element) {
				$(element).removeClass('is-invalid').addClass('is-valid');
			},
			errorElement: 'div ',
			errorClass: 'invalid-feedback',
			errorPlacement: function (error, element) {
				if (element.parent('.input-group').length) {
					error.insertAfter(element.parent());
				} else if ($(element).is('.select')) {
					element.next().after(error);
				} else if (element.hasClass('select2')) {
					//error.insertAfter(element);
					error.insertAfter(element.next());
				} else if (element.hasClass('selectpicker')) {
					error.insertAfter(element.next());
				} else {
					error.insertAfter(element);
				}
			},

			submitHandler: function (form) {

				var form = $('#informacoesComplementaresAddForm');
				// remove the text-danger
				$(".text-danger").remove();

				$.ajax({
					url: '<?php echo base_url('informacoesComplementares/add') ?>',
					type: 'post',
					data: form.serialize(), // /converting the form data into array and sending it to server
					dataType: 'json',
					beforeSend: function () {
						//$('#informacoesComplementaresAddForm-btn').html('<i class="fa fa-spinner fa-spin"></i>');
					},
					success: function (response) {

						if (response.success === true) {
							$('#informacoesComplementaresAddModal').modal('hide');

							var Toast = Swal.mixin({
								toast: true,
								position: 'bottom-end',
								showConfirmButton: false,
								timer: 2000
							});
							Toast.fire({
								icon: 'success',
								title: response.messages
							}).then(function () {
								$('#data_tableinformacoesComplementares').DataTable().ajax.reload(null, false).draw(false);
							})

						} else {

							if (response.messages instanceof Object) {
								$.each(response.messages, function (index, value) {
									var id = $("#" + index);

									id.closest('.form-control')
										.removeClass('is-invalid')
										.removeClass('is-valid')
										.addClass(value.length > 0 ? 'is-invalid' : 'is-valid');

									id.after(value);

								});
							} else {

								var Toast = Swal.mixin({
									toast: true,
									position: 'bottom-end',
									showConfirmButton: false,
									timer: 2000
								});
								Toast.fire({
									icon: 'error',
									title: response.messages
								})

							}
						}
						$('#informacoesComplementaresAddForm-btn').html('Adicionar');
					}
				});

				return false;
			}
		});
		$('#informacoesComplementaresAddForm').validate();
	}

	function editinformacoesComplementares(codInforComplementar) {
		$.ajax({
			url: '<?php echo base_url('informacoesComplementares/getOne') ?>',
			type: 'post',
			data: {
				codInforComplementar: codInforComplementar,
				csrf_sandra: $("#csrf_sandraPrincipal").val(),
			},
			dataType: 'json',
			success: function (response) {
				// reset the form 
				$("#informacoesComplementaresEditForm")[0].reset();
				$(".form-control").removeClass('is-invalid').removeClass('is-valid');
				$('#informacoesComplementaresEditModal').modal('show');

				$("#informacoesComplementaresEditForm #codInforComplementar").val(response.codInforComplementar);
				$("#informacoesComplementaresEditForm #codRequisicao").val(response.codRequisicao);
				$("#informacoesComplementaresEditForm #codCategoria").val(response.codCategoria);
				$("#informacoesComplementaresEditForm #conteudo").val(response.conteudo);





				$.ajax({
					url: '<?php echo base_url('InformacoesComplementares/listaDropDownCategoriaInformacoesComplementares') ?>',
					type: 'post',
					dataType: 'json',
					data: {
						csrf_sandra: $("#csrf_sandraPrincipal").val(),
					},
					success: function (listaInformacoesComplementaresAddForm) {

						$("#informacoesComplementaresEditForm #codCategoriaInforComplementar").select2({
							data: listaInformacoesComplementaresAddForm,
						})

						$("#informacoesComplementaresEditForm #codCategoriaInforComplementar").val(response.codCategoria); // Select the option with a value of '1'
						$("#informacoesComplementaresEditForm #codCategoriaInforComplementar").trigger('change');
						$(document).on('select2:open', () => {
							document.querySelector('.select2-search__field').focus();
						});

					}
				})





				$(function () {

					//ADD text editor
					$('#cabecalho').summernote({
						height: 150,
						maximumImageFileSize: 1024 * 1024, // 1Mb
						fontSizes: ['8', '9', '10', '11', '12', '14', '18', '20', '36', '72'],
						lineHeights: ['0.2', '0.3', '0.4', '0.5', '0.6', '0.8', '1.0', '1.2', '1.4', '1.5', '2.0', '3.0'],
						toolbar: [
							['style', ['style']],
							['fontname', ['fontname']],
							['font', ['color', 'strikethrough', 'superscript', 'subscript', 'bold', 'underline', 'clear']],
							['fontsize', ['fontsize']],
							['height', ['height']],
							['para', ['ul', 'ol', 'paragraph']],
							['table', ['table']],
							['insert', ['link', 'picture', 'video', 'hr']],
							['view', ['fullscreen', 'codeview', 'help']],
							['redo'],
							['undo'],
						],
						callbacks: {
							onImageUploadError: function (msg) {
								var Toast = Swal.mixin({
									toast: true,
									position: 'top-end',
									showConfirmButton: false,
									timer: 5000
								});
								Toast.fire({
									icon: 'error',
									title: 'Tamanho máximo de imagens é 1Mb'
								})
							}
						}
					})
				})




				// submit the edit from 
				$.validator.setDefaults({
					highlight: function (element) {
						$(element).addClass('is-invalid').removeClass('is-valid');
					},
					unhighlight: function (element) {
						$(element).removeClass('is-invalid').addClass('is-valid');
					},
					errorElement: 'div ',
					errorClass: 'invalid-feedback',
					errorPlacement: function (error, element) {
						if (element.parent('.input-group').length) {
							error.insertAfter(element.parent());
						} else if ($(element).is('.select')) {
							element.next().after(error);
						} else if (element.hasClass('select2')) {
							//error.insertAfter(element);
							error.insertAfter(element.next());
						} else if (element.hasClass('selectpicker')) {
							error.insertAfter(element.next());
						} else {
							error.insertAfter(element);
						}
					},

					submitHandler: function (form) {
						var form = $('#informacoesComplementaresEditForm');
						$(".text-danger").remove();
						$.ajax({
							url: '<?php echo base_url('informacoesComplementares/edit') ?>',
							type: 'post',
							data: form.serialize(),
							dataType: 'json',
							beforeSend: function () {
								//$('#informacoesComplementaresEditForm-btn').html('<i class="fa fa-spinner fa-spin"></i>');
							},
							success: function (response) {

								if (response.success === true) {

									$('#informacoesComplementaresEditModal').modal('hide');


									var Toast = Swal.mixin({
										toast: true,
										position: 'bottom-end',
										showConfirmButton: false,
										timer: 2000
									});
									Toast.fire({
										icon: 'success',
										title: response.messages
									}).then(function () {
										$('#data_tableinformacoesComplementares').DataTable().ajax.reload(null, false).draw(false);
									})

								} else {

									if (response.messages instanceof Object) {
										$.each(response.messages, function (index, value) {
											var id = $("#" + index);

											id.closest('.form-control')
												.removeClass('is-invalid')
												.removeClass('is-valid')
												.addClass(value.length > 0 ? 'is-invalid' : 'is-valid');

											id.after(value);

										});
									} else {
										var Toast = Swal.mixin({
											toast: true,
											position: 'bottom-end',
											showConfirmButton: false,
											timer: 2000
										});
										Toast.fire({
											icon: 'error',
											title: response.messages
										})

									}
								}
								$('#informacoesComplementaresEditForm-btn').html('Salvar');
							}
						});

						return false;
					}
				});
				$('#informacoesComplementaresEditForm').validate();

			}
		});
	}

	function removeinformacoesComplementares(codInforComplementar) {
		Swal.fire({
			title: 'Você tem certeza que deseja remover?',
			text: "Você não poderá reverter após a confirmação",
			icon: 'warning',
			showCancelButton: true,
			confirmButtonColor: '#3085d6',
			cancelButtonColor: '#d33',
			confirmButtonText: 'Confirmar',
			cancelButtonText: 'Cancelar'
		}).then((result) => {

			if (result.value) {
				$.ajax({
					url: '<?php echo base_url('informacoesComplementares/remove') ?>',
					type: 'post',
					data: {
						codInforComplementar: codInforComplementar,
						csrf_sandra: $("#csrf_sandraPrincipal").val(),
					},
					dataType: 'json',
					success: function (response) {

						if (response.success === true) {
							var Toast = Swal.mixin({
								toast: true,
								position: 'bottom-end',
								showConfirmButton: false,
								timer: 2000
							});
							Toast.fire({
								icon: 'success',
								title: response.messages
							}).then(function () {
								$('#data_tableinformacoesComplementares').DataTable().ajax.reload(null, false).draw(false);
							})
						} else {
							var Toast = Swal.mixin({
								toast: true,
								position: 'bottom-end',
								showConfirmButton: false,
								timer: 2000
							});
							Toast.fire({
								icon: 'error',
								title: response.messages
							})


						}
					}
				});
			}
		})
	}

</script>